# CODING_RULES

Purpose: 세션 간 코드 품질을 유지하기 위한 최소 규칙.

## 1. API
- 상태코드는 의미에 맞게 사용한다. (`201`, `204`, `400`, `404`)
- 비즈니스 검증 실패는 `IllegalArgumentException` + 일관된 에러 응답으로 처리한다.
- 공개 API/인증 API 경계를 명확히 유지한다.

## 2. Service
- 트랜잭션 경계는 서비스에서 잡는다.
- 서비스 메서드는 책임을 분리한다. (예: 일반가입 vs 초대가입)
- 도메인 핵심 제약은 서비스나 엔티티 메서드에서 강제한다.
- 서비스 관련 클래스/인터페이스 파일명은 반드시 `*Service` 규칙을 따른다.

## 3. Entity
- 생성/상태변경 메서드를 제공하고 임의 setter 확산을 피한다.
- 감사 컬럼(`created_by`, `updated_by`) non-null 제약을 깨지 않는다.
- `@Id` 필드 변수명은 도메인별 접미사 대신 `id`를 사용한다.

## 4. Test
- 기능 추가 시 unit + integration를 함께 추가한다.
- 기존 동작 회귀 테스트를 최소 1개 이상 유지한다.
- DB 연동 테스트는 현재 프로젝트 정책대로 실제 DB 기준으로 검증한다.

## 5. 문서
- 변경사항은 `SESSION_BRIEF.md`, `PROJECT_HANDOFF.md`에 즉시 반영한다.
- 사실/경로/명령을 구체적으로 기록한다.
